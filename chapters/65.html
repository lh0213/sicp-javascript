<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SicpTextbookRails</title>
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="oLIZUlEWA7cdvLkuziFI24KSLcMYdpikYGNCL1S/x1U0M2vYPBRlzvlJtOHxNatn2iTyj0RhGRwwo9Q+sIW8KA==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/application-4afa0dc75ea8a2ff925eb41df709aa5f5fae6640df639d9b6ae50ed06be5a5d2.css" />

    <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon-5cc7f923fb946d60fe9552847f4b6edd0f8cf2f122d6f3fef39d59ce84d47942.ico" />

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
			  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <script src="../assets/application-e1d34c17f2d1680f21b650089aea08e3ecfe292f1157f2d23bfa7d4d9d530c8b.js"></script>

    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

     <nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse fixed-top">
      <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
       <a class="navbar-brand navbar-brand-short" href="../chapters.html">CS1101S: SICP</a>
       <a class="navbar-brand navbar-brand-long" href="../chapters.html">CS1101S: Structure and Interpretation
          of Computer Programs</a>

       <div class="collapse navbar-collapse" id="navbarsExampleDefault">
         <form id="search" class="form-inline my-2 my-lg-0">
           <input id="search-box" class="form-control mr-sm-2" type="text" placeholder="Search">
           <div id="search-button" class="btn btn-outline-success my-2 my-sm-0">Search</div>

           <script>
               (function() {
                var cx = "002429487986305006822:ztnrbwx01qy";
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
               })();
            </script>
            <gcse:search></gcse:search>
         </form>
       </div>
     </nav>

     <div class="container scroll">

          <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-122">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                    <a href="122.html">About</a>
                  </a>
                </h5>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-123">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                    <a href="123.html">References</a>
                  </a>
                </h5>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-124">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                    <a href="124.html">Webpreface</a>
                  </a>
                </h5>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-1">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-1" aria-expanded="true" aria-controls="sidebar-collapse-1">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-1" aria-expanded="true" aria-controls="sidebar-collapse-1">
                    -
                  </a>
                    <a href="1.html">1.       Building Abstractions with       Functions    </a>
                </h5>
              </div>
              <div id="sidebar-collapse-1" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-2">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-2" aria-expanded="true" aria-controls="sidebar-collapse-2">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-2" aria-expanded="true" aria-controls="sidebar-collapse-2">
                    -
                  </a>
                    <a href="2.html">1. The Elements of Programming</a>
                </h5>
              </div>
              <div id="sidebar-collapse-2" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-3">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                    <a href="3.html">1. Expressions</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                    <a href="4.html">2. Naming and the Environment</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                    <a href="5.html">3.           Evaluating          Operator Combinations                  </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-6">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                    <a href="6.html">4.           Functions        </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-7">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                    <a href="7.html">5.           The Substitution Model for                                                 Function                              Application        </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                    <a href="8.html">6.           Conditional                                           Statements                              and Predicates        </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-9">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                    <a href="9.html">7. Example: Square Roots by Newtons Method</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-10">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-2" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                    <a href="10.html">8.                                                 Functions                                as Black-Box Abstractions        </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-11">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-11" aria-expanded="true" aria-controls="sidebar-collapse-11">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-11" aria-expanded="true" aria-controls="sidebar-collapse-11">
                    -
                  </a>
                    <a href="11.html">2.             Functions            and the Processes They Generate      </a>
                </h5>
              </div>
              <div id="sidebar-collapse-11" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-12">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                    <a href="12.html">1. Linear Recursion and Iteration</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-13">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                    <a href="13.html">2. Tree Recursion</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                    <a href="14.html">3. Orders of Growth</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-15">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                    <a href="15.html">4. Exponentiation</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-16">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                    <a href="16.html">5. Greatest Common Divisors</a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-17">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-11" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                    <a href="17.html">6. Example: Testing for Primality</a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-18">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-1" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                    -
                  </a>
                    <a href="18.html">3.         Formulating Abstractions with Higher-Order         Functions      </a>
                </h5>
              </div>
              <div id="sidebar-collapse-18" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-19">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-18" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                    <a href="19.html">1.           Functions          as Arguments        </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-20">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-18" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                    <a href="20.html">2.           Function Definition Expressions          </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-18" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                    <a href="21.html">3.             Functions            as General Methods          </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-22">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-18" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                    <a href="22.html">4.               Functions              as Returned Values            </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-23">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-23" aria-expanded="true" aria-controls="sidebar-collapse-23">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-23" aria-expanded="true" aria-controls="sidebar-collapse-23">
                    -
                  </a>
                    <a href="23.html">2. Building Abstractions with Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-23" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-24">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                    -
                  </a>
                    <a href="24.html">1. Introduction to Data Abstraction</a>
                </h5>
              </div>
              <div id="sidebar-collapse-24" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-25">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-24" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                    <a href="25.html">1.         Example: Arithmetic Operations for Rational Numbers      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-24" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                    <a href="26.html">2.         Abstraction Barriers      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-24" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                    <a href="27.html">3.         What Is Meant by Data?      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-28">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-24" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                    <a href="28.html">4.         Extended Exercise: Interval Arithmetic      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-29">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                    -
                  </a>
                    <a href="29.html">2. Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
              <div id="sidebar-collapse-29" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-29" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                    <a href="30.html">1.         Representing Sequences      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-31">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-29" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                    <a href="31.html">2.         Hierarchical Structures      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-29" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                    <a href="32.html">3.         Sequences as Conventional Interfaces      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-33">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-29" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                    <a href="33.html">4.         Example: A Picture Language      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-34">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-34" aria-expanded="true" aria-controls="sidebar-collapse-34">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-34" aria-expanded="true" aria-controls="sidebar-collapse-34">
                    -
                  </a>
                    <a href="34.html">3. Symbolic Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-34" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-35">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-34" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                    <a href="35.html">1.         Strings      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-36">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-34" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                    <a href="36.html">2.         Example: Symbolic Differentiation      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-34" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                    <a href="37.html">3.         Example: Representing Sets      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-38">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-34" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                    <a href="38.html">4.         Example: Huffman Encoding Trees      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-39">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-39" aria-expanded="true" aria-controls="sidebar-collapse-39">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-39" aria-expanded="true" aria-controls="sidebar-collapse-39">
                    -
                  </a>
                    <a href="39.html">4. Multiple Representations for Abstract Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-39" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-40">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-39" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                    <a href="40.html">1.         Representations for Complex Numbers      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-41">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-39" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                    <a href="41.html">2.         Tagged data      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-39" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                    <a href="42.html">3.         Data-Directed Programming and Additivity      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-43">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-23" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                    -
                  </a>
                    <a href="43.html">5. Systems with Generic Operations</a>
                </h5>
              </div>
              <div id="sidebar-collapse-43" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-44">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-43" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                    <a href="44.html">1.         Generic Arithmetic Operations      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-45">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-43" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                    <a href="45.html">2.         Combining Data of Different Types      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-43" href="#sidebar-collapse-46" aria-expanded="false" aria-controls="sidebar-collapse-46">
                    <a href="46.html">3.         Example: Symbolic Algebra      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-47">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                    -
                  </a>
                    <a href="47.html">3. Modularity, Objects, and State</a>
                </h5>
              </div>
              <div id="sidebar-collapse-47" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-48">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-48" aria-expanded="true" aria-controls="sidebar-collapse-48">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-48" aria-expanded="true" aria-controls="sidebar-collapse-48">
                    -
                  </a>
                    <a href="48.html">1. Assignment and Local State</a>
                </h5>
              </div>
              <div id="sidebar-collapse-48" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-49">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-48" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                    <a href="49.html">1.         Local State Variables      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-48" href="#sidebar-collapse-50" aria-expanded="false" aria-controls="sidebar-collapse-50">
                    <a href="50.html">2.         The Benefits of Introducing Assignment      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-48" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                    <a href="51.html">3.         The Costs of Introducing Assignment      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-52">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                    -
                  </a>
                    <a href="52.html">2. The Environment Model of Evaluation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-52" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-53">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-52" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                    <a href="53.html">1.         The Rules for Evaluation      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-52" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                    <a href="54.html">2.         Applying Simple        Functions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-52" href="#sidebar-collapse-55" aria-expanded="false" aria-controls="sidebar-collapse-55">
                    <a href="55.html">3.         Frames as the Repository of Local State      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-56">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-52" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                    <a href="56.html">4.         Internal Definitions      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-57">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-57" aria-expanded="true" aria-controls="sidebar-collapse-57">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-57" aria-expanded="true" aria-controls="sidebar-collapse-57">
                    -
                  </a>
                    <a href="57.html">3. Modeling with Mutable Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-57" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-58">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-57" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                    <a href="58.html">1.         Mutable List Structure      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-59">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-57" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                    <a href="59.html">2.         Representing Queues      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-57" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                    <a href="60.html">3.         Representing Tables      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-61">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-57" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                    <a href="61.html">4.         A Simulator for Digital Circuits      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-62">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-57" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                    <a href="62.html">5.         Propagation of Constraints      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-63">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-63" aria-expanded="true" aria-controls="sidebar-collapse-63">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-63" aria-expanded="true" aria-controls="sidebar-collapse-63">
                    -
                  </a>
                    <a href="63.html">4. Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
              <div id="sidebar-collapse-63" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-63" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                    <a href="64.html">1.         The Nature of Time in Concurrent Systems      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-65">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-63" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                    <a href="65.html">2.         Mechanisms for Controlling Concurrency      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-47" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                    -
                  </a>
                    <a href="66.html">5. Streams</a>
                </h5>
              </div>
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-67">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-66" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                    <a href="67.html">1.         Streams Are Delayed Lists      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-68">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-66" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                    <a href="68.html">2.         Infinite Streams      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-66" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                    <a href="69.html">3.   Exploiting the Stream Paradigm      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-66" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                    <a href="70.html">4.   Streams and Delayed Evaluation      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-71">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-66" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                    <a href="71.html">5.   Modularity of Functional Programs and Modularity of Objects      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-72">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-72" aria-expanded="true" aria-controls="sidebar-collapse-72">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-72" aria-expanded="true" aria-controls="sidebar-collapse-72">
                    -
                  </a>
                    <a href="72.html">4. Metalinguistic Abstraction</a>
                </h5>
              </div>
              <div id="sidebar-collapse-72" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                    -
                  </a>
                    <a href="73.html">1. The Metacircular Evaluator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-74">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                    <a href="74.html">1.   The Core of the Evaluator      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                    <a href="75.html">2.   Representing Statements and Expressions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                    <a href="76.html">3.   Evaluator Data Structures      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-77">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                    <a href="77.html">4.   Running the Evaluator as a Program      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-78">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                    <a href="78.html">5.   Data as Programs      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                    <a href="79.html">6.   Internal Definitions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-73" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                    <a href="80.html">7.   Separating Syntactic Analysis from Execution      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-81">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-81" aria-expanded="true" aria-controls="sidebar-collapse-81">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-81" aria-expanded="true" aria-controls="sidebar-collapse-81">
                    -
                  </a>
                    <a href="81.html">2. Variations on a SchemeLazy Evaluation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-81" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-82">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-81" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                    <a href="82.html">1.   Normal Order and Applicative Order      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-83">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-81" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                    <a href="83.html">2.   An Interpreter with Lazy Evaluation      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-81" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                    <a href="84.html">3.   Streams as Lazy Lists      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-85">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                    -
                  </a>
                    <a href="85.html">3. Variations on a SchemeNondeterministic Computing</a>
                </h5>
              </div>
              <div id="sidebar-collapse-85" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-86">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-85" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                    <a href="86.html">1.   Amb and Search      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-87">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-85" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                    <a href="87.html">2.   Examples of Nondeterministic Programs      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-85" href="#sidebar-collapse-88" aria-expanded="false" aria-controls="sidebar-collapse-88">
                    <a href="88.html">3.   Implementing the Amb Evaluator      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-89">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-72" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                    -
                  </a>
                    <a href="89.html">4. Logic Programming</a>
                </h5>
              </div>
              <div id="sidebar-collapse-89" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-90">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-89" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                    <a href="90.html">1.   Deductive Information Retrieval      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-91">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-89" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                    <a href="91.html">2.   How the Query System Works      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-89" href="#sidebar-collapse-92" aria-expanded="false" aria-controls="sidebar-collapse-92">
                    <a href="92.html">3.   Is Logic Programming Mathematical Logic?      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-93">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-89" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                    <a href="93.html">4.   Implementing the Query System      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                             <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-94">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-94" aria-expanded="true" aria-controls="sidebar-collapse-94">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#nav-sidebar" href="#sidebar-collapse-94" aria-expanded="true" aria-controls="sidebar-collapse-94">
                    -
                  </a>
                    <a href="94.html">5. Computing with Register Machines</a>
                </h5>
              </div>
              <div id="sidebar-collapse-94" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-95">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-95" aria-expanded="true" aria-controls="sidebar-collapse-95">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-95" aria-expanded="true" aria-controls="sidebar-collapse-95">
                    -
                  </a>
                    <a href="95.html">1. Designing Register Machines</a>
                </h5>
              </div>
              <div id="sidebar-collapse-95" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-95" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                    <a href="96.html">1.   A Language for Describing Register Machines      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-95" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                    <a href="97.html">2.   Abstraction in Machine Design      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-95" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                    <a href="98.html">3.   Subroutines      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-99">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-95" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                    <a href="99.html">4.   Using a Stack to Implement Recursion      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-100">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-95" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                    <a href="100.html">5.   Instruction Summary      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                    -
                  </a>
                    <a href="101.html">2. A Register-Machine Simulator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-101" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                    <a href="102.html">1.   The Machine Model      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-103">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-101" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                    <a href="103.html">2.   The Assembler      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-101" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                    <a href="104.html">3.   Generating Execution  Functions  for Instructions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-105">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-101" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                    <a href="105.html">4.   Monitoring Machine Performance      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-106">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-106" aria-expanded="true" aria-controls="sidebar-collapse-106">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-106" aria-expanded="true" aria-controls="sidebar-collapse-106">
                    -
                  </a>
                    <a href="106.html">3. Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
              <div id="sidebar-collapse-106" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-107">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-106" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                    <a href="107.html">1.   Memory as Vectors      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-106" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                    <a href="108.html">2.   Maintaining the Illusion of Infinite Memory      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                    -
                  </a>
                    <a href="109.html">4. The Explicit-Control Evaluator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-110">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-109" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                    <a href="110.html">1.   The Core of the Explicit-Control Evaluator      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-111">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-109" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                    <a href="111.html">2.   Sequence Evaluation and Tail Recursion      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-109" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                    <a href="112.html">3.   Conditionals, Assignments, and Definitions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-109" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                    <a href="113.html">4.   Running the Evaluator      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-114">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-114" aria-expanded="true" aria-controls="sidebar-collapse-114">
                    +
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" data-parent="#sidebar-94" href="#sidebar-collapse-114" aria-expanded="true" aria-controls="sidebar-collapse-114">
                    -
                  </a>
                    <a href="114.html">5. Compilation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-114" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-115">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                    <a href="115.html">1.   Structure of the Compiler      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                    <a href="116.html">2.   Compiling Expressions      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                    <a href="117.html">3.   Compiling Combinations      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-118">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                    <a href="118.html">4.   Combining Instruction Sequences      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-119">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                    <a href="119.html">5.   An Example of Compiled Code      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-120">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                    <a href="120.html">6.   Lexical Addressing      </a>
                  </a>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <a class="collapsed" data-toggle="collapse" data-parent="#sidebar-114" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                    <a href="121.html">7.   Interfacing Compiled Code to the Evaluator      </a>
                  </a>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

          </div>

           <div class="chapter-content">
    <div class="chapter-title">
        3.4.2.
        Mechanisms for Controlling Concurrency
      
    </div>
    <div class="chapter-text" >
        <div class="SUBSECTION"><SUBSECTION>
      

      

      <p>
        We've seen that the difficulty in dealing with concurrent processes is
        rooted in the need to consider the interleaving of the order of events
        in the different processes.  For example, suppose we have two
        processes, one with three ordered events $(a,b,c)$ and one with three
        ordered events $(x,y,z)$.  If the two processes run concurrently, with
        no constraints on how their execution is interleaved, then there are
        20 different possible orderings for the events that are consistent
        with the individual orderings for the two processes:
        
          \[ \begin{array}{cccc}
          (a,b,c,x,y,z) &amp; (a,x,b,y,c,z) &amp; (x,a,b,c,y,z) &amp; (x,a,y,z,b,c)\\
          (a,b,x,c,y,z) &amp; (a,x,b,y,z,c) &amp; (x,a,b,y,c,z) &amp; (x,y,a,b,c,z)\\
          (a,b,x,y,c,z) &amp; (a,x,y,b,c,z) &amp; (x,a,b,y,z,c) &amp; (x,y,a,b,z,c)\\
          (a,b,x,y,z,c) &amp; (a,x,y,b,z,c) &amp; (x,a,y,b,c,z) &amp; (x,y,a,z,b,c)\\
          (a,x,b,c,y,z) &amp; (a,x,y,z,b,c) &amp; (x,a,y,b,z,c) &amp; (x,y,z,a,b,c)
          \end{array} \]
        
        As programmers designing this system, we would have to consider the
        effects of each of these 20 orderings and check that each behavior is
        acceptable.  Such an approach rapidly becomes unwieldy as the numbers
        of processes and events increase.
      </p>

      <p>
        A more practical approach to the design of concurrent systems is to
        devise general mechanisms that allow us to constrain the interleaving
        of concurrent processes so that we can be sure that the program
        behavior is correct.  Many mechanisms have been developed for this
        purpose.  In this section, we describe one of them, the <EM>
          serializer</EM>.
      </p>

      <h2>
        Serializing access to shared state
      </h2>

      

      <p>
        Serialization implements the following idea: Processes will execute
        concurrently, but there will be certain collections of
        functions
        that
        cannot be executed concurrently.  More precisely, serialization creates
        distinguished sets of
        functions
        such that only one execution of a
        function
        in each serialized set is permitted to happen at a time.
        If some
        function
        in the set is being executed, then a process that
        attempts to execute any
        function
        in the set will be forced to wait
        until the first execution has finished.
      </p>

      <p>
        We can use serialization to control access to shared variables.
        For example, if we want to update a shared variable based on the
        previous value of that variable, we put the access to the previous
        value of the variable and the assignment of the new value to the
        variable in the same
        function.  We then ensure that no other
        function
        that assigns to the variable can run concurrently with this
        function
        by serializing all of these
        functions
        with the same
        serializer.  This guarantees that the value of the variable cannot be
        changed between an access and the corresponding assignment.
      </p>

      <h2>
        Serializers in Scheme
      </h2>

      <p>
        To make the above mechanism more concrete, suppose that we have
        extended Scheme to include a
        function
        called 
        
        <kbd>parallel-execute</kbd>:

        <kbd EVAL="no" class="snippet"></kbd>
      </p>

      <p>
        Each p must be a
        function
        of no arguments.  <kbd>Parallel-execute</kbd>
        creates a separate process for each
        p, which applies p (to no arguments).  These processes all
        run concurrently.<a class="superscript" id="footnote-link-1" href="65.html#footnote-1">[1]</a>
      </p>

      <p>
        As an example of how this is used, consider

        <div class="snippet" id="javascript_65_0_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_0','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        This creates two concurrent processes$P_1$, which sets <kbd>x</kbd> to
        <kbd>x</kbd> times <kbd>x</kbd>, and $P_2$, which increments <kbd>x</kbd>.  After
        execution is complete, <kbd>x</kbd> will be left with one of five possible
        values, depending on the interleaving of the events of $P_1$ and
        $P_2$:
        <TREETAB>
        \begin{tabular}{rp{3.5in}}
        101: &amp; $P_1$ sets <kbd>x</kbd> to 100 and then $P_2$ increments <kbd>x</kbd> to 101.\\
        121: &amp; $P_2$ increments <kbd>x</kbd> to 11 and then $P_1$ sets <kbd>x</kbd> to
        <kbd>x</kbd> times <kbd>x</kbd>.\\
        110: &amp; $P_2$ changes <kbd>x</kbd> from 10 to 11 between the two times that
        $P_1$ accesses the value of <kbd>x</kbd> during the evaluation of <kbd>???</kbd>.\\
        11:  &amp; $P_2$ accesses <kbd>x</kbd>, then $P_1$ sets <kbd>x</kbd> to 100,
        then $P_2$ sets <kbd>x</kbd>.\\
        100: &amp; $P_1$ accesses <kbd>x</kbd> (twice), then $P_2$ sets <kbd>x</kbd> to 11,
        then $P_1$ sets <kbd>x</kbd>.\\
        \end{tabular}
        </TREETAB>
      </p>

      <p>
        We can constrain the concurrency by using serialized
        functions,
        which are created by <EM>serializers</EM>. Serializers are constructed by <kbd>make\?serializer</kbd>, whose implementation is given below.  A serializer
        takes a
        function
        as argument and returns a serialized
        function
        that
        behaves like the original
        function.  All calls to a given serializer
        return serialized
        functions
        in the same set.
      </p>

      <p>
        Thus, in contrast to the example above, executing
        <div class="snippet" id="javascript_65_1_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_1','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>

        can produce only two possible values for <kbd>x</kbd>, 101 or 121.  The
        other possibilities are eliminated, because the execution of $P_1$ and
        $P_2$ cannot be interleaved.
      </p>

      <p>
        Here is a version of the <kbd>make-account</kbd>
        function
        from
        Section <REF NAME="sec:local-state-variables"></REF>, where the deposits and
        withdrawals have been serialized:

        <div class="snippet" id="javascript_65_2_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_2','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        With this implementation, two processes cannot be withdrawing from or
        depositing into a single account concurrently.  This eliminates the source
        of the error illustrated in Figure <REF NAME="fig:bank-access"></REF>, where Peter
        changes the account balance between the times when Paul accesses the
        balance to compute the new value and when Paul actually performs the
        assignment.  On the other hand, each account has its own serializer,
        so that deposits and withdrawals for different accounts can proceed
        concurrently.
      </p>

      <EXERCISE>
        Which of the five possibilities in the parallel execution shown above
        remain if we instead serialize execution as follows:

        <div class="snippet" id="javascript_65_3_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_3','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </EXERCISE>

      <EXERCISE>
        Give all possible values of <kbd>x</kbd> that can result from executing

        <div class="snippet" id="javascript_65_4_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_4','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>

        Which of these possibilities remain if we instead use serialized
        functions:

        <div class="snippet" id="javascript_65_5_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_5','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </EXERCISE>

      <EXERCISE>
        Ben Bitdiddle worries that it would be better to implement the bank
        account as follows (where the commented line has been changed):

        <div class="snippet" id="javascript_65_6_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_6','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
        because allowing unserialized access to the bank balance can result in
        anomalous behavior.  Do you agree?  Is there any scenario that
        demonstrates Ben's concern?
      </EXERCISE>

      <EXERCISE>
        Ben Bitdiddle suggests that it's a waste of time to create a new
        serialized
        function
        in response to every <kbd>withdraw</kbd> and <kbd>deposit</kbd> message.  He says that <kbd>make-account</kbd> could be changed so
        that the calls to <kbd>protected</kbd> are done outside the <kbd>dispatch</kbd>
        function.  That is, an account would return the same serialized
        function
        (which was created at the same time as the account) each time
        it is asked for a withdrawal
        function.
        <div class="snippet" id="javascript_65_7_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_7','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>

        Is this a safe change to make?  In particular, is there any difference in
        what concurrency is allowed by these two versions of <kbd>make-account</kbd>$\,$?
      </EXERCISE>
      

      <h2>
        Complexity of using multiple shared resources
      </h2>

      
      
      <p>
        Serializers provide a powerful abstraction that helps isolate the
        complexities of concurrent programs so that they can be dealt with
        carefully and (hopefully) correctly.  However, while using serializers
        is relatively straightforward when there is only a single shared
        resource (such as a single bank account), concurrent programming can
        be treacherously difficult when there are multiple shared resources.
      </p>

      <p>
        To illustrate one of the difficulties that can arise, suppose we wish to swap
        the balances in two bank accounts.  We access each account to find the
        balance, compute the difference between the balances, withdraw this
        difference from one account, and deposit it in the other account.  We
        could implement this as follows:<a class="superscript" id="footnote-link-2" href="65.html#footnote-2">[2]</a>

        <div class="snippet" id="javascript_65_8_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_8','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        This
        function
        works well when only a single process is trying to do
        the exchange.  Suppose, however, that Peter and Paul both have access
        to accounts $a1$, $a2$, and $a3$, and that
        Peter exchanges $a1$ and
        $a2$ while Paul concurrently exchanges $a1$ and $a3$.
        Even with account deposits and withdrawals
        serialized for individual accounts (as in the <kbd>make-account</kbd>
        function
        shown above in this section), <kbd>exchange</kbd> can still
        produce incorrect results.  For example, Peter might compute the
        difference in the balances for $a1$ and $a2$, but then Paul
        might change the balance in $a1$ before Peter is able to complete
        the exchange.<a class="superscript" id="footnote-link-3" href="65.html#footnote-3">[3]</a>
        For correct behavior, we must arrange for the <kbd>exchange</kbd>
        function
        to lock out any other concurrent accesses to the accounts during the
        entire time of the exchange.
      </p>

      <p>
        One way we can accomplish this is by using both accounts' serializers
        to serialize the entire <kbd>exchange</kbd>
        function.
        To do this, we will arrange for access to an account's serializer.
        Note that we are deliberately
        breaking the modularity of the bank-account object by exposing the
        serializer.  The following version of <kbd>make-account</kbd> is identical
        to the original version given in
        Section <REF NAME="sec:local-state-variables"></REF>, except that a serializer is
        provided to protect the balance variable, and the serializer is
        exported via message passing:

        <div class="snippet" id="javascript_65_9_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_9','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        We can use this to do serialized deposits and withdrawals.  However,
        unlike our earlier serialized account, it is now the responsibility of
        each user of bank-account objects to explicitly manage the
        serialization, for example as follows:<a class="superscript" id="footnote-link-4" href="65.html#footnote-4">[4]</a>

        <div class="snippet" id="javascript_65_10_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_10','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        Exporting the serializer in this way gives us enough flexibility to
        implement a serialized exchange program.  We simply
        serialize the original
        <kbd>exchange</kbd>
        function
        with the serializers for both accounts:

        <div class="snippet" id="javascript_65_11_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_11','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <EXERCISE>
        Suppose that the balances in three accounts start out as <DOLLAR></DOLLAR>10, <DOLLAR></DOLLAR>20,
        and <DOLLAR></DOLLAR>30, and that multiple processes run, exchanging the balances in
        the accounts.  Argue that if the processes are run sequentially,
        after any number of concurrent exchanges, the account balances should be 
        <DOLLAR></DOLLAR>10, <DOLLAR></DOLLAR>20, and <DOLLAR></DOLLAR>30 in some order.
        Draw a timing diagram like the one in Figure <REF NAME="fig:bank-access"></REF> to
        show how this condition can be violated if the exchanges are
        implemented using the first version of the account-exchange program in
        this section.  On the other hand, argue that even with this <kbd>exchange</kbd> program, the sum of the balances in the accounts will be
        preserved.  Draw a timing diagram to show how even this condition would
        be violated if we did not serialize the transactions
        on individual accounts.
        
      </EXERCISE>

      <EXERCISE>
        
        Consider the problem of transferring an amount from one account to
        another.  Ben Bitdiddle claims that this can be accomplished with the
        following
        function, even if there are multiple people concurrently
        transferring money among multiple accounts, using any account
        mechanism that serializes deposit and withdrawal transactions, for
        example, the version of <kbd>make-account</kbd> in the text above.

        <div class="snippet" id="javascript_65_12_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_12','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>

        Louis Reasoner claims that there is a problem here, and that we need
        to use a more sophisticated method, such as the one required for
        dealing with the exchange problem.  Is Louis right?  If not, what is
        the essential difference between the transfer problem and the exchange
        problem?  (You should assume that the balance in <kbd>from-account</kbd>
        is at least <kbd>amount</kbd>.)
      </EXERCISE>

      <EXERCISE>
        Louis Reasoner thinks our bank-account system is unnecessarily complex and
        error-prone now that deposits and withdrawals aren't automatically serialized.
        He suggests that <kbd>make-account-and-serializer</kbd> should have
        exported the serializer (for use by such
        functions
        as
        <kbd>serialized-exchange</kbd>) in addition to (rather than instead of)
        using it to serialize accounts and deposits as <kbd>make\?account</kbd> did.
        He proposes to redefine accounts as follows:

        <div class="snippet" id="javascript_65_13_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_13','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>

        Then deposits are handled as with the original <kbd>make-account</kbd>:
        <div class="snippet" id="javascript_65_14_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_14','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
        Explain what is wrong with Louis's reasoning.  In particular,
        consider what happens when <kbd>serialized-exchange</kbd> is called.
        
      </EXERCISE>
      
      

      <h2>
        Implementing serializers
      </h2>

      

      <p>
        We implement serializers in terms of a more primitive synchronization
        mechanism called a 
        
        <EM>mutex</EM>.  A mutex is an object that supports
        two operationsthe mutex can be 
        
        <EM>acquired</EM>, and the mutex can be
        
        <EM>released</EM>.  Once a mutex has been acquired, no other acquire
        operations on that mutex may proceed until the mutex is released.<a class="superscript" id="footnote-link-5" href="65.html#footnote-5">[5]</a> In our implementation, each
        serializer has an associated mutex.  Given a
        function
        <kbd>p</kbd>, the
        serializer returns a
        function
        that acquires the mutex, runs <kbd>p</kbd>,
        and then releases the mutex.  This ensures that only one of the
        functions
        produced by the serializer can be running at once, which is
        precisely the serialization property that we need to guarantee.

        <div class="snippet" id="javascript_65_15_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_15','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        The mutex is a mutable object (here we'll use a one-element
        list, which we'll refer to as a 
        
        <EM>cell\/</EM>) that can hold the value
        true or false.  When the value is false, the mutex is available to be
        acquired.  When the value is true, the mutex is unavailable, and any
        process that attempts to acquire the mutex must wait.
      </p>

      <p>
        Our mutex constructor <kbd>make-mutex</kbd> begins by initializing the cell
        contents to false.  To acquire the mutex, we test the cell.  If the
        mutex is available, we set the cell contents to true and proceed.
        Otherwise, we wait in a loop, attempting to acquire over and over
        again, until we find that the mutex is available.<a class="superscript" id="footnote-link-6" href="65.html#footnote-6">[6]</a>  To release the
        mutex, we set the cell contents to false.

        <div class="snippet" id="javascript_65_16_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_16','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        <kbd>Test-and-set!</kbd> tests the cell and returns the result of the
        test.  In addition, if the test was false, <kbd>test-and-set!</kbd> sets
        the cell contents to true before returning false.  We can express this
        behavior as the following
        function:

         <div class="snippet" id="javascript_65_17_div"></div><div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_17','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
      </p>

      <p>
        However, this implementation of <kbd>test-and-set!</kbd> does not suffice
        as it stands.  There is a crucial subtlety here, which is the
        essential place where concurrency control enters the system: The <kbd>test-and-set!</kbd> operation must be performed 
        
        <EM>atomically</EM>.  That
        is, we must guarantee that, once a process has tested the cell and
        found it to be false, the cell contents will actually be set to true
        before any other process can test the cell.  If we do not make this
        guarantee, then the mutex can fail in a way similar to the
        bank-account failure in Figure <REF NAME="fig:bank-access"></REF>.  (See
        Exercise <REF NAME="ex:atomic-test-and-set"></REF>.)
      </p>

      <p>
        The actual implementation of <kbd>test-and-set!</kbd> depends on the
        details of how our system runs concurrent processes.  For example, we
        might be executing concurrent processes on a sequential processor
        using a 
        
        time-slicing mechanism that cycles through the processes,
        permitting each process to run for a short time before interrupting it
        and moving on to the next process.  In that case, <kbd>test-and-set!</kbd>
        can work by disabling time slicing during the testing and setting.<a class="superscript" id="footnote-link-7" href="65.html#footnote-7">[7]</a>
        Alternatively, multiprocessing computers provide instructions that
        support atomic operations directly in hardware.<a class="superscript" id="footnote-link-8" href="65.html#footnote-8">[8]</a>
      </p>

      <EXERCISE>
        Suppose that we implement <kbd>test-and-set!</kbd>  using an ordinary
        function
        as shown in the text, without attempting to make the operation
        atomic.  Draw a timing diagram like the one in
        Figure <REF NAME="fig:bank-access"></REF> to demonstrate how the mutex
        implementation can fail by allowing two processes to acquire the mutex
        at the same time.
        
      </EXERCISE>

      <EXERCISE>
        
        
        A semaphore (of size $n$) is a generalization of a mutex.  Like a
        mutex, a semaphore supports acquire and release operations, but it is
        more general in that up to $n$ processes can acquire it
        concurrently.  Additional processes that attempt to acquire the
        semaphore must wait for release operations.  Give implementations of
        semaphores
        <OL>
          <LI>in terms of mutexes
          </LI>
          <LI>
            in terms of atomic <kbd>test-and-set!</kbd> operations.
          </LI>
        </OL>
      </EXERCISE>
      

      <h2>
        Deadlock
      </h2>

      
      

      <p>
        
        Now that we have seen how to implement serializers, we can see
        that account exchanging still has a problem, even with the
        <kbd>serialized\?exchange</kbd>
        function
        above.
        Imagine that Peter attempts to exchange $a1$
        with $a2$ while Paul concurrently attempts to exchange $a2$
        with $a1$.  Suppose that Peter's process reaches the point where
        it has entered a serialized
        function
        protecting $a1$ and, just
        after that, Paul's process enters a serialized
        function
        protecting
        $a2$.  Now Peter cannot proceed (to enter a serialized
        function
        protecting $a2$) until Paul exits the serialized
        function
        protecting $a2$.  Similarly, Paul cannot proceed until Peter exits
        the serialized
        function
        protecting $a1$.  Each process is stalled
        forever, waiting for the other.  This situation is called a <EM>
          deadlock</EM>.  Deadlock is always a danger in systems that provide
        concurrent access to multiple shared resources.
      </p>

      <p>
        
        One way to avoid the deadlock in this situation is to give each
        account a unique identification number and rewrite <kbd>serialized-exchange</kbd> so
        that a process will always attempt to enter a
        function
        protecting the
        lowest-numbered account first.  Although this method works well for
        the exchange problem, there are other situations that require more
        sophisticated deadlock-avoidance techniques, or where deadlock cannot
        be avoided at all.  (See exercises <REF NAME="ex:deadlock-avoid"></REF>
        and <REF NAME="ex:deadlock-cannot-avoid"></REF>.)<a class="superscript" id="footnote-link-9" href="65.html#footnote-9">[9]</a>
      </p>

      <EXERCISE>
        
        Explain in detail why the deadlock-avoidance method described above,
        (i.e., the accounts are numbered, and each process attempts to acquire
        the smaller-numbered account first) avoids deadlock in the exchange
        problem.  Rewrite <kbd>serialized-exchange</kbd> to incorporate this idea.
        (You will
        also need to modify <kbd>make-account</kbd> so that each account is created
        with a number, which can be accessed by sending an appropriate
        message.)
        
      </EXERCISE>

      <EXERCISE>
        Give a scenario where the deadlock-avoidance mechanism described
        above does not work.  (Hint: In the exchange problem, each process
        knows in advance which accounts it will need to get access to.  Consider a
        situation where a process must get access to some shared resources before it
        can know which additional shared resources it will require.)
        
      </EXERCISE>
      
      


      <h2>
        Concurrency, time, and communication
      </h2>

      <p>
        We've seen how programming concurrent systems requires controlling the
        ordering of events when different processes access shared
        state, and we've seen how to achieve this control through judicious
        use of serializers.  But the problems of concurrency
        lie deeper than this, because, from a fundamental point of view, it's
        not always clear what is meant by <QUOTE>shared state.</QUOTE>
      </p>

      <p>
        Mechanisms such as <kbd>test-and-set!</kbd> require processes to examine a
        global shared flag at arbitrary times.  This is problematic and
        inefficient to implement in modern high-speed processors, where
        due to optimization techniques such as pipelining and cached memory,
        the contents of memory
        may not be in a consistent state at every instant.  In contemporary
        multiprocessing systems, therefore, the serializer paradigm is being
        supplanted by new approaches to concurrency control.<a class="superscript" id="footnote-link-10" href="65.html#footnote-10">[10]</a>
      </p>

      <p>
        The problematic aspects of shared state also arise
        in large, distributed systems.  For
        instance, imagine a
        distributed banking system where individual branch banks maintain
        local values for bank balances and periodically compare these with
        values maintained by other branches.  In such a system the value of
        <QUOTE>the account balance</QUOTE> would be undetermined, except right after
        synchronization.
        If Peter deposits money in an account he holds
        jointly with Paul, when should we say that the account balance has
        changedwhen the balance in the local branch changes, or not until
        after the synchronization?  
        And if Paul accesses the account from a
        different branch, what are the reasonable constraints to place on the
        banking system such that the behavior is <QUOTE>correct</QUOTE>?  
        The only thing that might matter for
        correctness is the behavior observed by Peter and Paul individually
        and the <QUOTE>state</QUOTE> of the account immediately after synchronization.
        Questions about the
        <QUOTE>real</QUOTE> account balance or the order of events between synchronizations
        may be irrelevant or meaningless.<a class="superscript" id="footnote-link-11" href="65.html#footnote-11">[11]</a>
      </p>

      <p>
        
        The basic phenomenon here is that synchronizing different processes,
        establishing shared state, or imposing an order on events requires
        communication among the processes.  In essence, any notion of time in
        concurrency control must be intimately tied to communication.<a class="superscript" id="footnote-link-12" href="65.html#footnote-12">[12]</a>  It is
        intriguing that a similar connection between time and communication
        also arises in the 
        
        Theory of Relativity, where the speed of light (the
        fastest signal that can be used to synchronize events) is a
        fundamental constant relating time and space.  The
        complexities we encounter in dealing with time and state in our
        computational models may in fact mirror a fundamental complexity of
        the physical universe.
        
        
      </p>

    <hr>
<div class="footnote">
<a class="footnote-number" id="footnote-1" href="65.html#footnote-link-1">[1] </a><FOOTNOTE><kbd>Parallel-execute</kbd> is not part of standard Scheme, but
          it can be implemented in MIT Scheme.  In our implementation, the
          new concurrent processes also run concurrently with the original
          Scheme process.  Also, in our implementation, the value returned
          by <kbd>parallel-execute</kbd> is a special control object that can be used
          to halt the newly created processes.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-2" href="65.html#footnote-link-2">[2] </a><FOOTNOTE>We have simplified <kbd>exchange</kbd> by exploiting the fact
          that our <kbd>deposit</kbd> message accepts negative amounts.  (This is a
          serious bug in our banking system!)</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-3" href="65.html#footnote-link-3">[3] </a><FOOTNOTE>If the account balances start out as <DOLLAR></DOLLAR>10,
          <DOLLAR></DOLLAR>20, and <DOLLAR></DOLLAR>30, then after any number of concurrent exchanges, the
          balances should still be <DOLLAR></DOLLAR>10, <DOLLAR></DOLLAR>20, and
          <DOLLAR></DOLLAR>30 in some order.  Serializing the deposits to individual accounts is not
          sufficient to guarantee this.  See Exercise <REF NAME="ex:exchange-bug"></REF>.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-4" href="65.html#footnote-link-4">[4] </a><FOOTNOTE>Exercise <REF NAME="ex:export-serializer"></REF> investigates why
          deposits and withdrawals are no longer automatically serialized
          by the account.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-5" href="65.html#footnote-link-5">[5] </a><FOOTNOTE>The term <QUOTE>mutex</QUOTE> is an abbreviation for 
          
          <EM>mutual
            exclusion</EM>.  The general problem of arranging a mechanism that permits
          concurrent processes to safely share resources is called the mutual
          exclusion problem.  Our mutex is a simple variant of the 
          
          <EM>
            semaphore</EM> mechanism (see Exercise <REF NAME="ex:semaphore"></REF>), which was
          introduced in the 
          
          <QUOTE>THE</QUOTE> Multiprogramming System developed at the
          
          Technological University of Eindhoven and named for the university's
          initials in Dutch (<CITATION>Dijkstra 1968a</CITATION>).  The acquire and
          release operations were originally called 
          
          
          
          P and V, from the Dutch
          words <EM>passeren</EM> (to pass) and <EM>vrijgeven</EM> (to release), in
          reference to the semaphores used on railroad systems.  Dijkstra's
          classic exposition (1968b) was one of the first to clearly present the
          issues of concurrency control, and showed how to use semaphores to
          handle a variety of concurrency problems.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-6" href="65.html#footnote-link-6">[6] </a><FOOTNOTE>In most
          time-shared operating systems, processes that are 
          
          blocked by a mutex do
          
          not waste time <QUOTE>busy-waiting</QUOTE> as above.  Instead, the system
          schedules another process to run while the first is waiting, and the blocked
          process is awakened when the mutex becomes available.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-7" href="65.html#footnote-link-7">[7] </a><FOOTNOTE>In MIT Scheme for a single processor, which uses a time-slicing
          model, <kbd>test\?and\?set!</kbd> can be implemented as follows:
          
          
          <div class="snippet" id="javascript_65_18_div"></div>
<div class="pre-prettyprint">
<pre class="prettyprint" title="Evaluate Javascript expression" onclick="new window.JavascriptConsole('','javascript_65_18','', event,1.0);window.eval('');"></pre>
<a href="http://source-ide-new.surge.sh/?snippet=&amp;hidden=" class="snippet-ide-link btn btn-primary">[Open in IDE]</a>
</div>
          <kbd>Without-interrupts</kbd> disables
          time-slicing interrupts while its
          function
          argument is being executed.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-8" href="65.html#footnote-link-8">[8] </a><FOOTNOTE>There are many variants of such
          
          instructionsincluding test-and-set, test-and-clear, swap,
          compare-and-exchange, load-reserve, and store-conditionalwhose
          design must be carefully matched to the machine's processormemory
          interface.
          One issue that arises here is to determine what happens
          if two processes attempt to acquire the same resource
          at exactly the same time by using such an instruction.
          This requires some mechanism
          for making a decision about which process gets control.  Such a
          mechanism is called an 
          
          <EM>arbiter</EM>.  Arbiters usually boil down to
          some sort of hardware device.
          Unfortunately, it is possible to prove that one cannot physically
          construct a fair arbiter that works 100% of the time unless one
          allows the arbiter an arbitrarily long time to make its decision.  The
          fundamental phenomenon here was originally observed by the fourteenth-century
          French philosopher 
          
          Jean Buridan in his commentary on
          
          Aristotle's <EM>De caelo</EM>.  Buridan argued that a perfectly rational
          
          dog placed between two equally attractive sources of food will starve
          to death, because it is incapable of deciding which to go to first.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-9" href="65.html#footnote-link-9">[9] </a><FOOTNOTE>The general technique for avoiding deadlock by numbering the
          
          shared resources and acquiring them in order is due to 
          
          
          
          Havender
          (1968).  Situations where deadlock cannot be avoided require <EM>
            deadlock-recovery</EM> methods, which entail having processes <QUOTE>back out</QUOTE>
          of the deadlocked state and try again.  Deadlock-recovery
          mechanisms are widely used in database management systems, a topic that
          is treated in detail in <CITATION>Gray and Reuter 1993</CITATION>.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-10" href="65.html#footnote-link-10">[10] </a><FOOTNOTE>One such alternative to serialization is called 
          
          <EM>barrier
            synchronization</EM>.  The programmer permits concurrent processes to
          execute as they please, but establishes certain synchronization points
          (<QUOTE>barriers</QUOTE>) through which no process can proceed until all the
          processes have reached the barrier.  Modern processors provide machine
          instructions that permit programmers to establish synchronization
          points at places where consistency is required.  The 
          
          PowerPC$^{\rm
            TM}$, for example, includes for this purpose two instructions called
          
          SYNC and 
          
          EIEIO (Enforced In-order Execution of Input/Output).</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-11" href="65.html#footnote-link-11">[11] </a><FOOTNOTE>This may seem like a strange point of view, but there are
          
          systems that work this way.  International charges to credit-card
          accounts, for example, are normally cleared on a per-country basis,
          and the charges made in different countries are periodically
          reconciled.  Thus the account balance may be different in
          different countries.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-12" href="65.html#footnote-link-12">[12] </a><FOOTNOTE>For distributed
          systems, this perspective was pursued by 
          
          Lamport (1978), who showed how
          to use communication to establish <QUOTE>global clocks</QUOTE> that can be used
          to establish orderings on events in distributed systems.</FOOTNOTE>
</div></SUBSECTION></div>
    </div>

    <div class="nav">
    <!--
      <div type="button" class="btn btn-secondary">
        <a href="http://localhost:3000/chapters/64">&lt; Previous</a>
    </div>
    -->
      <div type="button" class="btn btn-secondary">
        <a class="scroll-next" href="66.html">Next &gt;</a>
      </div>


  </div>
  <script>
//<![CDATA[
var chapter_id = 65;
//]]>
</script>
  <div class="next-page"></div>
</div>

     </div><!-- /.container -->

     <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
     -->
   </body>
</html>
